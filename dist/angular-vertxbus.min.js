/*! angular-vertxbus - v6.1.1 - 2016-08-21
 * http://github.com/knalli/angular-vertxbus
 * Copyright (c) 2016 Jan Philipp
 * @license MIT */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("vertx-eventbus"));else if("function"==typeof define&&define.amd)define(["vertx-eventbus"],t);else{var n=t("object"==typeof exports?require("vertx-eventbus"):e.EventBus);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i);t["default"]=o["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(3),u=r(o),a=n(9),s=r(a);t["default"]=angular.module(i.moduleName,["ng"]).provider("vertxEventBus",u["default"]).provider("vertxEventBusService",s["default"]).name},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="knalli.angular-vertxbus";t.moduleName=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),o=r(i),u=n(7),a=r(u),s=n(6),l=r(s),c=n(8),f=r(c),d={enabled:!0,debugEnabled:!1,initialConnectEnabled:!0,urlServer:location.protocol+"//"+location.hostname+(function(){if(location.port)return":"+location.port}()||""),urlPath:"/eventbus",reconnectEnabled:!0,sockjsReconnectInterval:1e4,sockjsOptions:{}},v=function(){var e=this,t=angular.extend({},d);this.enable=function(){var n=arguments.length<=0||void 0===arguments[0]?d.enabled:arguments[0];return t.enabled=n===!0,e},this.disableAutoConnect=function(){return t.initialConnectEnabled=!1,e},this.useDebug=function(){var n=arguments.length<=0||void 0===arguments[0]?d.debugEnabled:arguments[0];return t.debugEnabled=n===!0,e},this.useUrlServer=function(){var n=arguments.length<=0||void 0===arguments[0]?d.urlServer:arguments[0];return t.urlServer=n,e},this.useUrlPath=function(){var n=arguments.length<=0||void 0===arguments[0]?d.urlPath:arguments[0];return t.urlPath=n,e},this.useReconnect=function(){var n=arguments.length<=0||void 0===arguments[0]?d.reconnectEnabled:arguments[0];return t.reconnectEnabled=n,e},this.useSockJsReconnectInterval=function(){var n=arguments.length<=0||void 0===arguments[0]?d.sockjsReconnectInterval:arguments[0];return t.sockjsReconnectInterval=n,e},this.useSockJsOptions=function(){var n=arguments.length<=0||void 0===arguments[0]?d.sockjsOptions:arguments[0];return t.sockjsOptions=n,e},this.$get=function(e,n,r){var i=angular.extend({},d,t);return i.enabled&&f["default"]?(i.debugEnabled&&n.debug("[Vert.x EB Stub] Enabled"),i.connectionConfig=new l["default"]({urlServer:i.urlServer,urlPath:i.urlPath}),delete i.urlServer,delete i.urlPath,new o["default"](f["default"],e,n,r,i)):(i.debugEnabled&&n.debug("[Vert.x EB Stub] Disabled"),new a["default"](f["default"],r))},this.$get.$inject=["$timeout","$log","$q"]};t["default"]=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(2),c=n(5),f=r(c),d=n(6),v=r(d),h=function(e){function t(e,n,r,u,a){var s=a.enabled,l=a.debugEnabled,c=a.initialConnectEnabled,f=a.connectionConfig,d=a.reconnectEnabled,v=a.sockjsReconnectInterval,h=a.sockjsOptions;i(this,t);var p=o(this,Object.getPrototypeOf(t).call(this,u));return p.EventBus=e,p.$timeout=n,p.$log=r,p.$q=u,p.options={enabled:s,debugEnabled:l,initialConnectEnabled:c,connectionConfig:f,reconnectEnabled:d,sockjsReconnectInterval:v,sockjsOptions:h},p.disconnectTimeoutEnabled=!0,p.applyDefaultHeaders(),c&&p.connect(),p}return u(t,e),s(t,[{key:"configureConnection",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?"/eventbus":arguments[1];return this.options.connectionConfig=new v["default"]({urlServer:e,urlPath:t}),this}},{key:"connect",value:function(){var e=this,t=this.$q.defer(),n=""+this.options.connectionConfig.urlServer+this.options.connectionConfig.urlPath;return this.options.debugEnabled&&this.$log.debug("[Vert.x EB Stub] Enabled: connecting '"+n+"'"),this.instance=new this.EventBus(n,this.options.sockjsOptions),this.instance.onopen=function(){e.options.debugEnabled&&e.$log.debug("[Vert.x EB Stub] Connected"),angular.isFunction(e.onopen)&&e.onopen(),t.resolve()},this.instance.onclose=function(){e.options.debugEnabled&&e.$log.debug("[Vert.x EB Stub] Reconnect in "+e.options.sockjsReconnectInterval+"ms"),angular.isFunction(e.onclose)&&e.onclose(),e.instance=void 0,e.disconnectTimeoutEnabled?e.options.reconnectEnabled&&(e.options.debugEnabled&&e.$log.debug("[Vert.x EB Stub] Reconnect in "+e.options.sockjsReconnectInterval+"ms"),e.$timeout(function(){return e.connect()},e.options.sockjsReconnectInterval)):(e.options.debugEnabled&&e.$log.debug("[Vert.x EB Stub] Reconnect immediately"),e.disconnectTimeoutEnabled=!0,e.connect())},this.instance.onerror=function(t){angular.isFunction(e.onerror)&&e.onerror(t)},t.promise}},{key:"reconnect",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];this.instance&&this.instance.state===this.EventBus.OPEN?(e&&(this.disconnectTimeoutEnabled=!1),this.instance.close()):this.connect()}},{key:"close",value:function(){this.instance&&this.instance.close()}},{key:"send",value:function(e,t,n,r){if(this.instance){var i=this.getMergedHeaders(n);this.instance.send(e,t,i,r)}}},{key:"publish",value:function(e,t,n){if(this.instance){var r=this.getMergedHeaders(n);this.instance.publish(e,t,r)}}},{key:"registerHandler",value:function(e,t,n){var r=this;if(this.instance){var i=function(){angular.isFunction(t)&&!n&&(n=t,t=void 0);var i=r.getMergedHeaders(t);r.instance.registerHandler(e,i,n);var o=function(){r.unregisterHandler(e,i,n)};return o.displayName=l.moduleName+".wrapper.eventbus.registerHandler.deconstructor",{v:o}}();if("object"===("undefined"==typeof i?"undefined":a(i)))return i.v}}},{key:"unregisterHandler",value:function(e,t,n){if(this.instance&&this.instance.state===this.EventBus.OPEN){angular.isFunction(t)&&!n&&(n=t,t=void 0);var r=this.getMergedHeaders(t);this.instance.unregisterHandler(e,r,n)}}},{key:"readyState",value:function(){return this.instance?this.instance.state:this.EventBus.CLOSED}},{key:"getOptions",value:function(){return angular.extend({},this.options)}},{key:"state",get:function(){return this.readyState()}}]),t}(f["default"]);t["default"]=h},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){n(this,e),this.$q=t}return r(e,[{key:"configureConnection",value:function(){}},{key:"connect",value:function(){return this.$q.reject()}},{key:"reconnect",value:function(){}},{key:"close",value:function(){}},{key:"send",value:function(){}},{key:"publish",value:function(){}},{key:"registerHandler",value:function(){}},{key:"unregisterHandler",value:function(){}},{key:"readyState",value:function(){}},{key:"getOptions",value:function(){return{}}},{key:"onopen",value:function(){}},{key:"onclose",value:function(){}},{key:"getDefaultHeaders",value:function(){return this.defaultHeaders}},{key:"applyDefaultHeaders",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.defaultHeaders=angular.extend({},e)}},{key:"getMergedHeaders",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return angular.extend({},this.defaultHeaders,e)}}]),e}();t["default"]=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){var r=t.urlServer,i=t.urlPath;n(this,e),this._urlServer=r,this._urlPath=i}return r(e,[{key:"urlServer",get:function(){return this._urlServer}},{key:"urlPath",get:function(){return this._urlPath}}]),e}();t["default"]=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5),s=r(a),l=function(e){function t(e,n){i(this,t);var r=o(this,Object.getPrototypeOf(t).call(this,n));return r.EventBus=e,r}return u(t,e),t}(s["default"]);t["default"]=l},function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),o=r(i),u=n(14),a=r(u),s=n(15),l=r(s),c={enabled:!0,debugEnabled:!1,authRequired:!1,prefix:"vertx-eventbus.",sockjsStateInterval:1e4,messageBuffer:1e4},f=function(){var e=this,t=angular.extend({},c);this.enable=function(){var n=arguments.length<=0||void 0===arguments[0]?c.enabled:arguments[0];return t.enabled=n===!0,e},this.useDebug=function(){var n=arguments.length<=0||void 0===arguments[0]?c.debugEnabled:arguments[0];return t.debugEnabled=n===!0,e},this.usePrefix=function(){var n=arguments.length<=0||void 0===arguments[0]?c.prefix:arguments[0];return t.prefix=n,e},this.useSockJsStateInterval=function(){var n=arguments.length<=0||void 0===arguments[0]?c.sockjsStateInterval:arguments[0];return t.sockjsStateInterval=n,e},this.useMessageBuffer=function(){var n=arguments.length<=0||void 0===arguments[0]?c.messageBuffer:arguments[0];return t.messageBuffer=n,e},this.authHandler=function(n){return t.authHandler=n,t.authRequired=!!n,e},this.$get=function(e,n,r,i,u,s){var c=angular.extend({},i.getOptions(),t);return c.enabled?new l["default"](new o["default"](e,r,u,n,s,i,c),u):new l["default"](new a["default"])},this.$get.$inject=["$rootScope","$q","$interval","vertxEventBus","$log","$injector"]};t["default"]=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),l=n(11),c=r(l),f=n(12),d=r(f),v=n(13),h=r(v),p=function(e){function t(e,n,r,u,a,s,l){var f=l.enabled,v=l.debugEnabled,h=l.prefix,p=l.sockjsStateInterval,b=l.messageBuffer,g=l.authRequired,y=l.authHandler;i(this,t);var k=o(this,Object.getPrototypeOf(t).call(this));if(k.$rootScope=e,k.$interval=n,k.$log=r,k.$q=u,k.eventBus=s,k.options={enabled:f,debugEnabled:v,prefix:h,sockjsStateInterval:p,messageBuffer:b,authRequired:g},angular.isFunction(y))k.authHandler=y;else if(angular.isString(y))try{k.authHandler=a.get(y)}catch(m){k.options.debugEnabled&&k.$log.debug("[Vert.x EB Service] Failed to resolve authHandler: %s",m.message)}return k.connectionState=k.eventBus.EventBus.CLOSED,k.states={connected:!1,authorized:!1},k.observers=[],k.messageQueue=new c["default"](k.options.messageBuffer),k.callbackMap=new d["default"],k.initialize(),k}return u(t,e),a(t,[{key:"initialize",value:function(){var e=this;this.eventBus.onopen=function(){return e.onEventbusOpen()},this.eventBus.onclose=function(){return e.onEventbusClose()};var t=function(){return e.getConnectionState(!0)};t.displayName="connectionIntervalCheck",this.$interval(function(){return t()},this.options.sockjsStateInterval)}},{key:"onEventbusOpen",value:function(){var e=!1;if(this.getConnectionState(!0),this.states.connected||(this.states.connected=!0,e=!0),this.afterEventbusConnected(),e&&this.$rootScope.$broadcast(this.options.prefix+"system.connected"),this.$rootScope.$digest(),this.options.messageBuffer&&this.messageQueue.size()){for(;this.messageQueue.size();){var t=this.messageQueue.first();angular.isFunction(t)&&t()}this.$rootScope.$digest()}}},{key:"onEventbusClose",value:function(){this.getConnectionState(!0),this.states.connected&&(this.states.connected=!1,this.$rootScope.$broadcast(this.options.prefix+"system.disconnected"))}},{key:"observe",value:function(e){this.observers.push(e)}},{key:"afterEventbusConnected",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.observers[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;angular.isFunction(o.afterEventbusConnected)&&o.afterEventbusConnected()}}catch(u){t=!0,n=u}finally{try{!e&&i["return"]&&i["return"]()}finally{if(t)throw n}}}},{key:"registerHandler",value:function(e,t,n){var r=this;if(angular.isFunction(t)&&!n&&(n=t,t=void 0),angular.isFunction(n)){this.options.debugEnabled&&this.$log.debug("[Vert.x EB Service] Register handler for "+e);var i=function(e,t,i){var o=t.body;n(o,i),r.$rootScope.$digest()};return i.displayName=s.moduleName+".service.delegate.live.registerHandler.callbackWrapper",this.callbackMap.put(n,i),this.eventBus.registerHandler(e,t,i)}}},{key:"unregisterHandler",value:function(e,t,n){angular.isFunction(t)&&!n&&(n=t,t=void 0),angular.isFunction(n)&&(this.options.debugEnabled&&this.$log.debug("[Vert.x EB Service] Unregister handler for "+e),this.eventBus.unregisterHandler(e,t,this.callbackMap.get(n)),this.callbackMap.remove(n))}},{key:"send",value:function(e,t,n){var r=this,i=arguments.length<=3||void 0===arguments[3]?1e4:arguments[3],o=arguments.length<=4||void 0===arguments[4]||arguments[4],u=this.$q.defer(),a=function(){o?!function(){var o=r.$interval(function(){r.options.debugEnabled&&r.$log.debug("[Vert.x EB Service] send('"+e+"') timed out"),u.reject()},i,1);r.eventBus.send(e,t,n,function(e,t){r.$interval.cancel(o),e?u.reject(e):u.resolve(t)})}():(r.eventBus.send(e,t,n),u.resolve())};return a.displayName=s.moduleName+".service.delegate.live.send.next",this.ensureOpenAuthConnection(a).then(null,u.reject),u.promise}},{key:"publish",value:function(e,t,n){var r=this;return this.ensureOpenAuthConnection(function(){return r.eventBus.publish(e,t,n)})}},{key:"ensureOpenConnection",value:function(e){var t=this.$q.defer();return this.isConnectionOpen()?(e(),t.resolve({inQueue:!1})):this.options.messageBuffer?(this.messageQueue.push(e),t.resolve({inQueue:!0})):t.reject(),t.promise}},{key:"ensureOpenAuthConnection",value:function(e){var t=this;if(this.options.authRequired){var n=function(){if(t.authHandler){var n=function(){t.states.authorized=!0,e()},r=function(){t.states.authorized=!1,t.options.debugEnabled&&t.$log.debug("[Vert.x EB Service] Message was not sent due authHandler rejected")},i=t.authHandler(t.eventBus);return i&&angular.isFunction(i.then)?(i.then(n,r),!0):(t.options.debugEnabled&&t.$log.debug("[Vert.x EB Service] Message was not sent because authHandler is returning not a promise"),!1)}return t.options.debugEnabled&&t.$log.debug("[Vert.x EB Service] Message was not sent because no authHandler is defined"),!1};return n.displayName=s.moduleName+".service.delegate.live.ensureOpenAuthConnection.fnWrapper",this.ensureOpenConnection(n)}return this.ensureOpenConnection(e)}},{key:"getConnectionState",value:function(e){return this.options.enabled?e&&(this.connectionState=this.eventBus.state):this.connectionState=this.eventBus.EventBus.CLOSED,this.connectionState}},{key:"isConnectionOpen",value:function(){return this.getConnectionState()===this.eventBus.EventBus.OPEN}},{key:"isAuthorized",value:function(){return this.states.authorized}},{key:"isConnected",value:function(){return this.states.connected}},{key:"isEnabled",value:function(){return this.options.enabled}},{key:"getMessageQueueLength",value:function(){return this.messageQueue.size()}}]),t}(h["default"]);t["default"]=p},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?10:arguments[0];n(this,e),this.maxSize=t,this.items=[]}return r(e,[{key:"push",value:function(e){return this.items.push(e),this.recalibrateBufferSize()}},{key:"recalibrateBufferSize",value:function(){for(;this.items.length>this.maxSize;)this.first();return this}},{key:"last",value:function(){return this.items.pop()}},{key:"first",value:function(){return this.items.shift(0)}},{key:"size",value:function(){return this.items.length}}]),e}();t["default"]=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e),this.clear()}return r(e,[{key:"put",value:function(e,t){var n=this._indexForKey(e);return n>-1?this.values[n]=t:(this.keys.push(e),this.values.push(t)),this}},{key:"get",value:function(e){var t=this._indexForKey(e);if(t>-1)return this.values[t]}},{key:"containsKey",value:function(e){var t=this._indexForKey(e);return t>-1}},{key:"containsValue",value:function(e){var t=this._indexForValue(e);return t>-1}},{key:"remove",value:function(e){var t=this._indexForKey(e);t>-1&&(this.keys[t]=void 0,this.values[t]=void 0)}},{key:"clear",value:function(){return this.keys=[],this.values=[],this}},{key:"_indexForKey",value:function(e){for(var t in this.keys)if(e===this.keys[t])return t;return-1}},{key:"_indexForValue",value:function(e){for(var t in this.values)if(e===this.values[t])return t;return-1}}]),e}();t["default"]=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e)}return r(e,[{key:"observe",value:function(){}},{key:"getConnectionState",value:function(){return 3}},{key:"isConnectionOpen",value:function(){return!1}},{key:"isAuthorized",value:function(){return!1}},{key:"isEnabled",value:function(){return!1}},{key:"isConnected",value:function(){return!1}},{key:"send",value:function(){}},{key:"publish",value:function(){}}]),e}();t["default"]=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(13),s=r(a),l=function(e){function t(){return i(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),t}(s["default"]);t["default"]=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2),u=function(){function e(t,n){var i=this;r(this,e),this.delegate=t,this.$log=n,this.handlers={},this.delegate.observe({afterEventbusConnected:function(){return i.afterEventbusConnected()}})}return i(e,[{key:"afterEventbusConnected",value:function(){for(var e in this.handlers)if(Object.prototype.hasOwnProperty.call(this.handlers,e)){var t=this.handlers[e];if(t&&t.length){var n=!0,r=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var a=o.value,s=a.headers,l=a.callback;this.delegate.registerHandler(e,s,l)}}catch(c){r=!0,i=c}finally{try{!n&&u["return"]&&u["return"]()}finally{if(r)throw i}}}}}},{key:"registerHandler",value:function(e,t,n){var r=this;this.handlers[e]||(this.handlers[e]=[]);var i={headers:t,callback:n};this.handlers[e].push(i);var u=null;this.delegate.isConnectionOpen()&&(this.delegate.registerHandler(e,t,n),u=function(){return r.delegate.unregisterHandler(e,t,n)});var a=function(){if(u&&(u(),u=void 0),r.handlers[e]){var t=r.handlers[e].indexOf(i);t>-1&&r.handlers[e].splice(t,1),r.handlers[e].length<1&&(r.handlers[e]=void 0)}};return a.displayName=o.moduleName+".service.registerHandler.deconstructor",a}},{key:"on",value:function(e,t,n){return this.registerHandler(e,t,n)}},{key:"addListener",value:function(e,t,n){return this.registerHandler(e,t,n)}},{key:"unregisterHandler",value:function(e,t,n){if(this.handlers[e]){var r=this.handlers[e].indexOf({headers:t,callback:n});r>-1&&this.handlers[e].splice(r,1),this.handlers[e].length<1&&(this.handlers[e]=void 0)}this.delegate.isConnectionOpen()&&this.delegate.unregisterHandler(e,t,n)}},{key:"un",value:function(e,t,n){return this.unregisterHandler(e,t,n)}},{key:"removeListener",value:function(e,t,n){return this.unregisterHandler(e,t,n)}},{key:"send",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=arguments.length<=3||void 0===arguments[3]?{timeout:1e4,expectReply:!0}:arguments[3];return this.delegate.send(e,t,n,r.timeout,r.expectReply)}},{key:"publish",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return this.delegate.publish(e,t,n)}},{key:"emit",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return this.publish(e,t,n)}},{key:"getConnectionState",value:function(){return this.delegate.getConnectionState()}},{key:"readyState",value:function(){return this.getConnectionState()}},{key:"isConnectionOpen",value:function(){return this.isConnectionOpen()}},{key:"isEnabled",value:function(){return this.delegate.isEnabled()}},{key:"isConnected",value:function(){return this.delegate.isConnected()}},{key:"isAuthorized",value:function(){return this.delegate.isAuthorized()}},{key:"isValidSession",value:function(){return this.delegate.isAuthorized()}},{key:"getMessageQueueLength",value:function(){return this.delegate.getMessageQueueLength()}}]),e}();t["default"]=u}])});
//# sourceMappingURL=angular-vertxbus.min.js.map